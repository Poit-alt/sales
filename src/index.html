<!DOCTYPE html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com; img-src 'self' https://via.placeholder.com" />
    <meta http-equiv="X-Content-Security-Policy" content="default-src 'self'; script-src 'self'" />
    <meta name="storage-path" content="/Users/peternordal/Documents/GitHub/sales/data/products.json" />
    <title>Project Hub</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="../node_modules/font-awesome/css/font-awesome.min.css" />
  </head>
  <body>
    <header>
      <div class="logo">ProjectHub</div>
      <div class="header-actions">
        <!-- Header actions can be added here -->
      </div>
    </header>
    
    <main>
      <aside class="sidebar">
        <div class="sidebar-content">
          <ul class="sidebar-nav">
            <li><a href="#" data-tab="dashboard" class="active"><i class="fa fa-sitemap"></i> <span>Projects</span></a></li>
            <li><a href="#" data-tab="products"><i class="fa fa-cubes"></i> <span>Products</span></a></li>
            <li><a href="#"><i class="fa fa-file-text"></i> <span>Documents</span></a></li>
            <li class="divider"></li>
            <li><a href="#" data-tab="settings"><i class="fa fa-cog"></i> <span>Settings</span></a></li>
            <li><a href="#"><i class="fa fa-question-circle"></i> <span>Help</span></a></li>
          </ul>
          
          <div class="sidebar-footer">
            <button id="theme-toggle" class="theme-toggle" title="Toggle Dark Mode">
              <i class="fa fa-moon-o"></i>
              <i class="fa fa-sun-o"></i>
            </button>
            <button id="toggle-sidebar" class="btn-icon" title="Toggle Sidebar">
              <i class="fa fa-angle-left"></i>
              <i class="fa fa-bars mobile-icon"></i>
            </button>
          </div>
        </div>
      </aside>
      
      <section class="content">
        <div class="content-header">
          <h1 id="content-title">Project Dashboard</h1>
          <div class="content-actions">
            <button class="button" id="header-action-button"><i class="fa fa-plus"></i> New Project</button>
          </div>
        </div>
        
        <div class="projects-summary">
          <div class="summary-card active">
            <div class="summary-value" id="num-products">-</div>
            <div class="summary-label">Products</div>
          </div>
          <div class="summary-card upcoming">
            <div class="summary-value" id="num-categories">-</div>
            <div class="summary-label">Categories</div>
          </div>
          <div class="summary-card completed">
            <div class="summary-value" id="num-sales">-</div>
            <div class="summary-label">Sales</div>
          </div>
          <div class="summary-card overdue">
            <div class="summary-value" id="num-customers">-</div>
            <div class="summary-label">Customers</div>
          </div>
        </div>
        
        <!-- Using sidebar navigation instead of tabs -->
        
        <!-- Dashboard Tab -->
        <div class="tab-content active" id="dashboard-tab">
          <div class="projects-header">
            <div id="projects-db-path-container"></div>
            
            <div class="project-controls">
              <button id="select-projects-db-path" class="button button-primary"><i class="fa fa-folder-open"></i> Open Projects Database</button>
            </div>
          </div>
          
          <h2>Active Projects</h2>
          <div class="project-grid">
            <div class="project-card">
              <div class="project-card-header">
                <div class="project-priority high">High Priority</div>
                <div class="project-menu"><i class="fa fa-ellipsis-v"></i></div>
              </div>
              <h3 class="project-title">Website Redesign</h3>
              <div class="project-details">
                <div class="project-completion">
                  <span class="completion-text">75% Complete</span>
                  <div class="progress-bar">
                    <div class="progress" style="width: 75%"></div>
                  </div>
                </div>
                <div class="project-deadline">
                  <i class="fa fa-calendar"></i> Due: Jun 15, 2023
                </div>
                <div class="project-team">
                  <div class="team-members">
                    <img src="https://via.placeholder.com/24" alt="Team Member" class="team-member">
                    <img src="https://via.placeholder.com/24" alt="Team Member" class="team-member">
                    <img src="https://via.placeholder.com/24" alt="Team Member" class="team-member">
                    <span class="team-more">+2</span>
                  </div>
                </div>
              </div>
              <div class="project-stats">
                <div class="stat">
                  <i class="fa fa-check-circle"></i> 18/24
                </div>
                <div class="stat">
                  <i class="fa fa-comment"></i> 12
                </div>
                <div class="stat">
                  <i class="fa fa-paperclip"></i> 5
                </div>
              </div>
            </div>
            
            <div class="project-card">
              <div class="project-card-header">
                <div class="project-priority medium">Medium Priority</div>
                <div class="project-menu"><i class="fa fa-ellipsis-v"></i></div>
              </div>
              <h3 class="project-title">Mobile App Development</h3>
              <div class="project-details">
                <div class="project-completion">
                  <span class="completion-text">45% Complete</span>
                  <div class="progress-bar">
                    <div class="progress" style="width: 45%"></div>
                  </div>
                </div>
                <div class="project-deadline">
                  <i class="fa fa-calendar"></i> Due: Jul 30, 2023
                </div>
                <div class="project-team">
                  <div class="team-members">
                    <img src="https://via.placeholder.com/24" alt="Team Member" class="team-member">
                    <img src="https://via.placeholder.com/24" alt="Team Member" class="team-member">
                    <img src="https://via.placeholder.com/24" alt="Team Member" class="team-member">
                  </div>
                </div>
              </div>
              <div class="project-stats">
                <div class="stat">
                  <i class="fa fa-check-circle"></i> 24/53
                </div>
                <div class="stat">
                  <i class="fa fa-comment"></i> 28
                </div>
                <div class="stat">
                  <i class="fa fa-paperclip"></i> 12
                </div>
              </div>
            </div>
            
            <div class="project-card">
              <div class="project-card-header">
                <div class="project-priority high">High Priority</div>
                <div class="project-menu"><i class="fa fa-ellipsis-v"></i></div>
              </div>
              <h3 class="project-title">CRM Integration</h3>
              <div class="project-details">
                <div class="project-completion">
                  <span class="completion-text">30% Complete</span>
                  <div class="progress-bar">
                    <div class="progress" style="width: 30%"></div>
                  </div>
                </div>
                <div class="project-deadline">
                  <i class="fa fa-calendar"></i> Due: Jun 25, 2023
                </div>
                <div class="project-team">
                  <div class="team-members">
                    <img src="https://via.placeholder.com/24" alt="Team Member" class="team-member">
                    <img src="https://via.placeholder.com/24" alt="Team Member" class="team-member">
                    <span class="team-more">+1</span>
                  </div>
                </div>
              </div>
              <div class="project-stats">
                <div class="stat">
                  <i class="fa fa-check-circle"></i> 12/40
                </div>
                <div class="stat">
                  <i class="fa fa-comment"></i> 15
                </div>
                <div class="stat">
                  <i class="fa fa-paperclip"></i> 8
                </div>
              </div>
            </div>
            
            <div class="project-card">
              <div class="project-card-header">
                <div class="project-priority low">Low Priority</div>
                <div class="project-menu"><i class="fa fa-ellipsis-v"></i></div>
              </div>
              <h3 class="project-title">Content Strategy</h3>
              <div class="project-details">
                <div class="project-completion">
                  <span class="completion-text">85% Complete</span>
                  <div class="progress-bar">
                    <div class="progress" style="width: 85%"></div>
                  </div>
                </div>
                <div class="project-deadline">
                  <i class="fa fa-calendar"></i> Due: Jun 10, 2023
                </div>
                <div class="project-team">
                  <div class="team-members">
                    <img src="https://via.placeholder.com/24" alt="Team Member" class="team-member">
                    <img src="https://via.placeholder.com/24" alt="Team Member" class="team-member">
                  </div>
                </div>
              </div>
              <div class="project-stats">
                <div class="stat">
                  <i class="fa fa-check-circle"></i> 17/20
                </div>
                <div class="stat">
                  <i class="fa fa-comment"></i> 7
                </div>
                <div class="stat">
                  <i class="fa fa-paperclip"></i> 3
                </div>
              </div>
            </div>
          </div>
          
          <h2>Upcoming Deadlines</h2>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Project</th>
                  <th>Status</th>
                  <th>Team Lead</th>
                  <th>Deadline</th>
                  <th>Progress</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="project-cell">
                    <div class="project-info">
                      <span class="project-name">Website Redesign</span>
                      <span class="project-client">Acme Corp</span>
                    </div>
                  </td>
                  <td><span class="status-in-progress">In Progress</span></td>
                  <td>Jane Smith</td>
                  <td>Jun 15, 2023</td>
                  <td>
                    <div class="progress-bar">
                      <div class="progress" style="width: 75%"></div>
                    </div>
                  </td>
                  <td>
                    <div class="actions">
                      <button class="btn-icon"><i class="fa fa-eye"></i></button>
                      <button class="btn-icon"><i class="fa fa-edit"></i></button>
                      <button class="btn-icon"><i class="fa fa-share-alt"></i></button>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td class="project-cell">
                    <div class="project-info">
                      <span class="project-name">CRM Integration</span>
                      <span class="project-client">TechNova</span>
                    </div>
                  </td>
                  <td><span class="status-at-risk">At Risk</span></td>
                  <td>Mike Johnson</td>
                  <td>Jun 25, 2023</td>
                  <td>
                    <div class="progress-bar">
                      <div class="progress progress-warning" style="width: 30%"></div>
                    </div>
                  </td>
                  <td>
                    <div class="actions">
                      <button class="btn-icon"><i class="fa fa-eye"></i></button>
                      <button class="btn-icon"><i class="fa fa-edit"></i></button>
                      <button class="btn-icon"><i class="fa fa-share-alt"></i></button>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td class="project-cell">
                    <div class="project-info">
                      <span class="project-name">Content Strategy</span>
                      <span class="project-client">GlobeCorp</span>
                    </div>
                  </td>
                  <td><span class="status-in-progress">In Progress</span></td>
                  <td>Sarah Williams</td>
                  <td>Jun 10, 2023</td>
                  <td>
                    <div class="progress-bar">
                      <div class="progress" style="width: 85%"></div>
                    </div>
                  </td>
                  <td>
                    <div class="actions">
                      <button class="btn-icon"><i class="fa fa-eye"></i></button>
                      <button class="btn-icon"><i class="fa fa-edit"></i></button>
                      <button class="btn-icon"><i class="fa fa-share-alt"></i></button>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        
        <!-- Products Tab -->
        <div class="tab-content" id="products-tab">
          <div class="products-header">
            <div id="db-path-container"></div>
            
            <div class="product-controls">
              <button id="select-db-path" class="button button-primary"><i class="fa fa-folder-open"></i> Open Products Database</button>
              
              <div class="products-actions">
                <div class="search-container">
                  <input type="text" id="product-search" placeholder="Search by ID, name, or description...">
                  <i class="fa fa-search"></i>
                </div>
                <div class="filter-container">
                  <select id="category-filter">
                    <option value="">All Categories</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
          
          <div class="table-container">
            <table id="products-table">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Name</th>
                  <th>Category</th>
                  <th>Price</th>
                  <th>Stock</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="products-table-body">
                <!-- Products will be loaded here dynamically -->
                <tr class="empty-row">
                  <td colspan="7">
                    <div class="empty-state">
                      <i class="fa fa-cubes"></i>
                      <p>No products found. Please select a database folder.</p>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          
          <!-- Pagination -->
          <div class="pagination">
            <button id="prev-page" class="pagination-btn" disabled><i class="fa fa-chevron-left"></i> Previous</button>
            <span id="page-info">Page 1 of 1</span>
            <button id="next-page" class="pagination-btn" disabled>Next <i class="fa fa-chevron-right"></i></button>
          </div>
          
        </div>
        
        <!-- Settings Tab -->
        <div class="tab-content" id="settings-tab">
          <div class="settings-container">
            <div class="settings-section">
              <h2>User Settings</h2>
              <div class="settings-group">
                <label for="user-name">Your Name</label>
                <div class="settings-control">
                  <input type="text" id="user-name" placeholder="Enter your name">
                  <p class="settings-help">This name will appear when you make changes to products, such as price updates.</p>
                </div>
              </div>
              
              <div class="settings-group">
                <label for="user-role">Role</label>
                <div class="settings-control">
                  <select id="user-role">
                    <option value="staff">Staff</option>
                    <option value="manager">Manager</option>
                    <option value="admin">Administrator</option>
                  </select>
                </div>
              </div>
              
              <div class="settings-group">
                <label for="default-currency">Default Currency</label>
                <div class="settings-control">
                  <select id="default-currency">
                    <option value="USD">USD (US Dollar)</option>
                    <option value="EUR">EUR (Euro)</option>
                    <option value="GBP">GBP (British Pound)</option>
                    <option value="NOK">NOK (Norwegian Krone)</option>
                    <option value="SEK">SEK (Swedish Krona)</option>
                    <option value="DKK">DKK (Danish Krone)</option>
                  </select>
                  <p class="settings-help">Default currency used across the application for new products and projects.</p>
                </div>
              </div>
              
              <div class="settings-actions">
                <button id="save-user-settings" class="button">Save User Settings</button>
              </div>
            </div>
            
            <div class="settings-section">
              <h2>Application Settings</h2>
              <div class="settings-group">
                <label>Theme</label>
                <div class="settings-control settings-theme-selector">
                  <button class="theme-button" data-theme="light">
                    <div class="theme-preview light"></div>
                    <span>Light</span>
                  </button>
                  <button class="theme-button" data-theme="dark">
                    <div class="theme-preview dark"></div>
                    <span>Dark</span>
                  </button>
                </div>
              </div>
              
              <div class="settings-group">
                <label>Currency Conversion Rates</label>
                <p class="settings-description">
                  Set conversion rates relative to USD (1 USD = X units of currency).
                  These rates will be used when converting between currencies in reports.
                </p>
                <div class="currency-rates-container">
                  <div class="currency-rate-row">
                    <label>USD (US Dollar)</label>
                    <input type="number" id="rate-USD" value="1.00" disabled>
                  </div>
                  <div class="currency-rate-row">
                    <label>EUR (Euro)</label>
                    <input type="number" id="rate-EUR" value="0.93" step="0.01" min="0.01">
                  </div>
                  <div class="currency-rate-row">
                    <label>GBP (British Pound)</label>
                    <input type="number" id="rate-GBP" value="0.78" step="0.01" min="0.01">
                  </div>
                  <div class="currency-rate-row">
                    <label>NOK (Norwegian Krone)</label>
                    <input type="number" id="rate-NOK" value="10.5" step="0.01" min="0.01">
                  </div>
                  <div class="currency-rate-row">
                    <label>SEK (Swedish Krona)</label>
                    <input type="number" id="rate-SEK" value="10.4" step="0.01" min="0.01">
                  </div>
                  <div class="currency-rate-row">
                    <label>DKK (Danish Krone)</label>
                    <input type="number" id="rate-DKK" value="6.9" step="0.01" min="0.01">
                  </div>
                </div>
                <div class="settings-actions">
                  <button id="save-currency-rates" class="button">Save Currency Rates</button>
                </div>
              </div>
            </div>
            
            <div class="settings-section">
              <h2>Project Product Categories</h2>
              <p class="settings-description">
                Define standard categories for organizing products in projects. 
                These categories will be available in all new projects.
              </p>
              
              <div class="category-manager">
                <div id="product-categories-list">
                  <!-- Categories will be listed here -->
                </div>
                
                <div class="category-input-row">
                  <input type="text" id="new-category-input" placeholder="New category name">
                  <button id="add-category-btn" class="button button-sm">
                    <i class="fa fa-plus"></i> Add
                  </button>
                </div>
                
                <div class="settings-actions">
                  <button id="save-categories" class="button">Save Categories</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
    
    <!-- Product Edit Modal -->
    <div id="product-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modal-title">Edit Product</h2>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body">
          <div class="modal-tabs">
            <button type="button" id="modal-tab-details" class="modal-tab active">Details</button>
            <button type="button" id="modal-tab-price-history" class="modal-tab">Price History</button>
          </div>
          
          <form id="product-form" class="modal-tab-content active" data-tab="details">
            <div class="form-row">
              <div class="form-group">
                <label for="product-id">Product ID</label>
                <input type="text" id="product-id" readonly>
              </div>
              
              <div class="form-group">
                <label for="product-type">Product Type</label>
                <select id="product-type">
                  <option value="regular">Regular Product</option>
                  <option value="bundle">Bundle/Kit</option>
                </select>
              </div>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label for="product-name">Name</label>
                <input type="text" id="product-name" required>
              </div>
              
              <div class="form-group">
                <label for="product-price">Price</label>
                <input type="number" id="product-price" min="0" step="0.01" required>
              </div>
            </div>
            
            <div class="form-row bundle-fields" style="display: none;">
              <div class="form-group">
                <label for="product-regular-price">Regular Price (Full Price)</label>
                <input type="number" id="product-regular-price" min="0" step="0.01">
              </div>
              
              <div class="form-group">
                <label for="product-bundle-savings">Bundle Savings Description</label>
                <input type="text" id="product-bundle-savings" placeholder="e.g. 15% off regular price">
              </div>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label for="product-category">Category</label>
                <select id="product-category" required>
                  <!-- Categories will be loaded dynamically -->
                </select>
              </div>
              
              <div class="form-group">
                <label for="product-subcategory">Subcategory</label>
                <select id="product-subcategory">
                  <option value="">None</option>
                  <!-- Subcategories will be loaded dynamically -->
                </select>
              </div>
            </div>
            
            <div class="form-group">
              <label for="product-description">Description</label>
              <textarea id="product-description" rows="3"></textarea>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label for="product-currency">Currency</label>
                <select id="product-currency">
                  <option value="USD">USD ($)</option>
                  <option value="EUR">EUR (€)</option>
                  <option value="GBP">GBP (£)</option>
                  <option value="NOK">NOK (kr)</option>
                  <option value="SEK">SEK (kr)</option>
                  <option value="DKK">DKK (kr)</option>
                </select>
              </div>
              
              <div class="form-group">
                <label for="product-status">Status</label>
                <select id="product-status">
                  <option value="Active">Active</option>
                  <option value="Inactive">Inactive</option>
                  <option value="Out of Stock">Out of Stock</option>
                </select>
              </div>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label for="product-instock">In Stock</label>
                <input type="checkbox" id="product-instock">
              </div>
              
              <div class="form-group">
                <label for="product-quantity">Quantity</label>
                <input type="number" id="product-quantity" min="0" step="1">
              </div>
            </div>
            
            <!-- Bundle items section -->
            <div class="form-row bundle-fields bundle-items-section" style="display: none;">
              <div class="form-group full-width">
                <label>Bundle Items</label>
                <div id="bundle-items-container">
                  <!-- Bundle item inputs will be added here dynamically -->
                </div>
                <button type="button" id="add-bundle-item" class="button button-outline"><i class="fa fa-plus"></i> Add Product to Bundle</button>
              </div>
            </div>
            
            <div class="form-row features-section">
              <div class="form-group full-width">
                <label>Features</label>
                <div id="features-container">
                  <!-- Feature inputs will be added here dynamically -->
                </div>
                <button type="button" id="add-feature" class="button button-outline"><i class="fa fa-plus"></i> Add Feature</button>
              </div>
            </div>
            
            <div class="form-actions">
              <button type="button" id="cancel-edit" class="button button-outline">Cancel</button>
              <button type="submit" id="save-product" class="button">Save Changes</button>
            </div>
          </form>
          
          <div id="price-history-container" class="modal-tab-content" data-tab="price-history">
            <div class="price-history-header">
              <h3>Price History</h3>
              <p class="price-history-current">Current Price: <span id="current-price-display">-</span></p>
            </div>
            
            <div class="price-history-empty" id="price-history-empty">
              <p>No price change history available for this product.</p>
            </div>
            
            <div class="price-history-table-container">
              <table class="price-history-table">
                <thead>
                  <tr>
                    <th>Date</th>
                    <th>Price</th>
                    <th>Regular Price</th>
                    <th>Currency</th>
                    <th>Changed By</th>
                  </tr>
                </thead>
                <tbody id="price-history-table-body">
                  <!-- Price history entries will be added here dynamically -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Project Details Modal with Technical Summary -->
    <div id="project-details-modal" class="modal">
      <div class="modal-content modal-content-wide">
        <div class="modal-header">
          <h2 id="project-details-title">Project Details</h2>
          <div class="modal-header-actions">
            <div class="dropdown">
              <button class="dropdown-button" id="project-file-menu-btn"><i class="fa fa-bars"></i> File</button>
              <div class="dropdown-content" id="project-file-dropdown">
                <a href="#" id="project-file-print"><i class="fa fa-print"></i> Print Products</a>
                <a href="#" id="project-file-save-pdf"><i class="fa fa-file-pdf-o"></i> Save as PDF</a>
                <a href="#" id="project-file-export-excel"><i class="fa fa-file-excel-o"></i> Export to Excel</a>
              </div>
            </div>
            <button id="details-print-btn" class="button-icon" title="Print Technical Summary">
              <i class="fa fa-print"></i>
            </button>
            <button class="modal-close">&times;</button>
          </div>
        </div>
        <div class="modal-tabs">
          <button type="button" class="modal-tab active" data-tab="overview">Overview</button>
          <button type="button" class="modal-tab" data-tab="tech-summary">Technical Summary</button>
          <button type="button" class="modal-tab" data-tab="products">Products</button>
          <button type="button" class="modal-tab" data-tab="revisions">Revisions</button>
          <button type="button" class="modal-tab" data-tab="print-view" id="print-view-tab" style="display: none;">Print View</button>
        </div>
        <div class="modal-body">
          <!-- Overview Tab -->
          <div class="modal-tab-content active" data-tab="overview">
            <div class="project-details-container">
              <div class="project-details-section">
                <h3>General Information</h3>
                <div class="project-details-grid">
                  <div class="detail-item">
                    <div class="detail-label">Status</div>
                    <div class="detail-value" id="details-status"></div>
                  </div>
                  <div class="detail-item">
                    <div class="detail-label">Priority</div>
                    <div class="detail-value" id="details-priority"></div>
                  </div>
                  <div class="detail-item">
                    <div class="detail-label">Client</div>
                    <div class="detail-value" id="details-client"></div>
                  </div>
                  <div class="detail-item">
                    <div class="detail-label">Deadline</div>
                    <div class="detail-value" id="details-deadline"></div>
                  </div>
                  <div class="detail-item">
                    <div class="detail-label">Completion</div>
                    <div class="detail-value" id="details-completion"></div>
                  </div>
                  <!-- Team Size and Budget fields removed -->
                  <div class="detail-item">
                    <div class="detail-label">Created By</div>
                    <div class="detail-value" id="details-created-by"></div>
                  </div>
                </div>
              </div>
              
              <div class="project-details-section">
                <h3>Description</h3>
                <div class="project-description" id="details-description"></div>
              </div>
              
              <div class="project-details-section">
                <h3>Tasks</h3>
                <div class="project-tasks-list" id="details-tasks">
                  <div class="empty-message">No tasks for this project</div>
                </div>
              </div>
              
              <div class="project-details-section">
                <h3>Products Summary</h3>
                <div class="project-products-summary" id="details-products-summary">
                  <div class="empty-message">No products for this project</div>
                </div>
                <div class="project-products-total" id="details-products-total"></div>
              </div>
            </div>
          </div>
          
          <!-- Technical Summary Tab -->
          <div class="modal-tab-content" data-tab="tech-summary">
            <div class="tech-summary-container">
              <div class="tech-summary-header">
                <h3>Technical Summary</h3>
                <div class="tech-summary-actions">
                  <button id="tech-summary-save" class="button button-sm">Save Changes</button>
                </div>
              </div>
              
              <div class="tech-summary-section">
                <div class="form-group">
                  <label for="tech-summary-title">Summary Title</label>
                  <input type="text" id="tech-summary-title" placeholder="Enter a title for this technical summary">
                </div>
                
                <div class="form-group">
                  <label for="tech-summary-scope">Project Scope</label>
                  <textarea id="tech-summary-scope" rows="4" placeholder="Define the technical scope of this project..."></textarea>
                </div>
                
                <div class="form-group">
                  <label for="tech-summary-requirements">Technical Requirements</label>
                  <textarea id="tech-summary-requirements" rows="5" placeholder="List the technical requirements..."></textarea>
                </div>
                
                <div class="form-group">
                  <label for="tech-summary-approach">Technical Approach</label>
                  <textarea id="tech-summary-approach" rows="5" placeholder="Describe the technical approach..."></textarea>
                </div>
                
                <div class="form-group">
                  <label for="tech-summary-constraints">Constraints & Considerations</label>
                  <textarea id="tech-summary-constraints" rows="3" placeholder="List any technical constraints or special considerations..."></textarea>
                </div>
                
                <div class="form-group">
                  <label for="tech-summary-recommendations">Recommendations</label>
                  <textarea id="tech-summary-recommendations" rows="3" placeholder="Add technical recommendations..."></textarea>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Products Tab -->
          <div class="modal-tab-content" data-tab="products">
            <div class="project-products-container">
              <div class="project-products-header">
                <h3>Project Products</h3>
                <div class="project-products-actions">
                  <button id="add-project-product-btn" class="button button-sm">
                    <i class="fa fa-plus"></i> Add Product
                  </button>
                  <button id="add-product-category-btn" class="button button-sm button-outline">
                    <i class="fa fa-folder"></i> Add Category
                  </button>
                </div>
              </div>
              
              <div class="products-summary-bar">
                <div class="product-category-summary">
                  <span id="category-count-display">0 categories</span>
                </div>
                <div class="product-count-summary">
                  <span id="product-count-display">0 products</span>
                </div>
              </div>
              
              <div class="project-products-categories" id="details-product-categories">
                <!-- Product categories will be rendered here -->
              </div>
              
              <div class="project-products-list" id="details-products">
                <div class="empty-message">No products for this project</div>
              </div>
              
              <div class="project-products-total-bar">
                <div class="project-products-total" id="details-products-total-bar"></div>
                <button id="save-products-changes" class="button">Save Changes</button>
              </div>
            </div>
          </div>
          
          <!-- Revisions Tab -->
          <div class="modal-tab-content" data-tab="revisions">
            <div class="project-revisions-container">
              <div class="project-revisions-header">
                <h3>Revision History</h3>
                <div class="project-revisions-actions">
                  <button id="create-revision-btn" class="button button-sm">
                    <i class="fa fa-plus"></i> Create New Revision
                  </button>
                  <button id="compare-revisions-btn" class="button button-sm">
                    <i class="fa fa-exchange"></i> Compare Revisions
                  </button>
                </div>
              </div>
              
              <!-- Revision comparison tools (hidden by default) -->
              <div id="revision-comparison-tools" class="revision-comparison-tools" style="display: none;">
                <div class="comparison-selectors">
                  <div class="comparison-selector">
                    <label for="compare-from">From:</label>
                    <select id="compare-from">
                      <option value="current">Current Version</option>
                      <!-- Options will be added dynamically -->
                    </select>
                  </div>
                  <div class="comparison-selector">
                    <label for="compare-to">To:</label>
                    <select id="compare-to">
                      <option value="current">Current Version</option>
                      <!-- Options will be added dynamically -->
                    </select>
                  </div>
                  <button id="run-comparison-btn" class="button button-sm">Compare</button>
                  <button id="close-comparison-btn" class="button button-sm button-outline">
                    <i class="fa fa-times"></i> Close
                  </button>
                </div>
              </div>
              
              <!-- Comparison results (hidden by default) -->
              <div id="comparison-results" class="comparison-results" style="display: none;">
                <h4>Comparison Results</h4>
                <div id="comparison-content"></div>
              </div>
              
              <div class="project-revisions-list" id="project-revisions">
                <div class="empty-message">No revisions saved yet</div>
              </div>
            </div>
          </div>
          
          <!-- Print View Tab (for professional printing) -->
          <div class="modal-tab-content" data-tab="print-view">
            <div class="print-view-container">
              <div class="print-view-header">
                <h2 id="print-view-title">Project Product Overview</h2>
                <div class="print-view-meta">
                  <div><strong>Client:</strong> <span id="print-view-client"></span></div>
                  <div><strong>Date:</strong> <span id="print-view-date"></span></div>
                </div>
              </div>
              
              <div class="print-view-description">
                <p id="print-view-description"></p>
              </div>
              
              <div id="print-view-categories">
                <!-- Categories and products will be rendered here -->
              </div>
              
              <div class="print-view-summary">
                <div id="print-view-total"></div>
              </div>
              
              <div class="print-view-options">
                <div class="print-view-option">
                  <label for="print-currency">Output Currency for PDF/Export:</label>
                  <select id="print-currency">
                    <option value="USD">USD (US Dollar)</option>
                    <option value="EUR">EUR (Euro)</option>
                    <option value="GBP">GBP (British Pound)</option>
                    <option value="NOK">NOK (Norwegian Krone)</option>
                    <option value="SEK">SEK (Swedish Krona)</option>
                    <option value="DKK">DKK (Danish Krone)</option>
                  </select>
                  <div class="option-description">
                    <i class="fa fa-exchange"></i> All prices will be converted from their original currencies to this selected currency using the exchange rates defined in Settings.
                  </div>
                </div>
              </div>
              
              <div class="print-view-footer">
                <div class="print-actions">
                  <button id="print-now-btn" class="button">
                    <i class="fa fa-print"></i> Print Now
                  </button>
                  <button id="export-pdf-btn" class="button export-pdf-btn">
                    <i class="fa fa-file-pdf-o"></i> Save as PDF
                  </button>
                  <button id="export-excel-btn" class="button">
                    <i class="fa fa-file-excel-o"></i> Export to Excel
                  </button>
                </div>
              </div>
            </div>
          </div>
          
          <div class="modal-actions">
            <button type="button" id="details-edit-project" class="button">Edit Project</button>
            <button type="button" id="details-close" class="button button-outline">Close</button>
          </div>
        </div>
      </div>
    </div>
  
    <!-- New Project Modal -->
    <div id="project-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="project-modal-title">Create New Project</h2>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body">
          <form id="project-form">
            <div class="form-row">
              <div class="form-group">
                <label for="project-name">Project Name</label>
                <input type="text" id="project-name" required>
              </div>
              
              <div class="form-group">
                <label for="project-client">Client Name</label>
                <input type="text" id="project-client">
              </div>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label for="project-priority">Priority</label>
                <select id="project-priority">
                  <option value="high">High Priority</option>
                  <option value="medium" selected>Medium Priority</option>
                  <option value="low">Low Priority</option>
                </select>
              </div>
              
              <div class="form-group">
                <label for="project-status">Status</label>
                <select id="project-status">
                  <option value="Active" selected>Active</option>
                  <option value="On Hold">On Hold</option>
                  <option value="Completed">Completed</option>
                  <option value="Cancelled">Cancelled</option>
                  <option value="Pending">Pending</option>
                </select>
              </div>
              
              <div class="form-group">
                <label for="project-deadline">Deadline</label>
                <input type="date" id="project-deadline" required>
              </div>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label for="project-currency">Default Currency</label>
                <select id="project-currency">
                  <option value="USD">USD (US Dollar)</option>
                  <option value="EUR">EUR (Euro)</option>
                  <option value="GBP">GBP (British Pound)</option>
                  <option value="NOK">NOK (Norwegian Krone)</option>
                  <option value="SEK">SEK (Swedish Krona)</option>
                  <option value="DKK">DKK (Danish Krone)</option>
                </select>
                <div class="input-hint">Used for project exports and PDF generation</div>
              </div>
              
              <div class="form-group">
                <label for="project-completion">Completion Percentage</label>
                <div class="completion-input-container">
                  <input type="range" id="project-completion" min="0" max="100" value="0" class="completion-slider">
                  <span class="completion-value">0%</span>
                </div>
              </div>
            </div>
            
            <div class="form-row">
              <div class="form-group full-width">
                <label for="project-description">Description</label>
                <textarea id="project-description" rows="3"></textarea>
              </div>
            </div>
            
            <!-- Team Size and Budget fields removed -->
            
            <div class="form-row tasks-section">
              <div class="form-group full-width">
                <label>Tasks <span class="optional-text">(optional)</span></label>
                <div id="tasks-container">
                  <!-- Task inputs will be added here dynamically -->
                </div>
                <button type="button" id="add-task" class="button button-outline"><i class="fa fa-plus"></i> Add Task</button>
              </div>
            </div>
            
            <!-- Project Products section removed -->
            
            <div class="form-actions">
              <button type="button" id="cancel-project" class="button button-outline">Cancel</button>
              <button type="submit" id="save-project" class="button">Create Project</button>
            </div>
          </form>
        </div>
      </div>
    </div>
    
    <script src="renderer.js"></script>
  </body>
</html>